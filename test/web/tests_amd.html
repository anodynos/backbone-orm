<!-- runs from _build/test/web -->
<!DOCTYPE HTML>
<html>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
  <title>Backbone-ORM</title>
  <script type="text/javascript" src="../../../bower_components/requirejs/require.js"></script>
  <script type="text/javascript">
    require.config({
      baseUrl: "../",
      
      paths: {
        mocha: "../../bower_components/mocha/mocha",
        chai: "../../bower_components/chai/chai",
        'underscore': "../../bower_components/underscore/underscore",
        'backbone': "../../bower_components/backbone/backbone",
        'moment': "../../bower_components/moment/moment",
        'inflection': "../../bower_components/inflection/lib/inflection",
        'stream': "../../stream",
        'backbone-orm': "../backbone-orm"
      },

      shim: {
        backbone: { deps: ['underscore'], exports: "Backbone"},
        underscore: { deps: [], exports: "_"},
        inflection: { deps: [], exports: "inflection"}
      }
    });

    require(['underscore', 'backbone', 'stream', 'backbone-orm'], function(_, Backbone, stream, BackboneORM) {
      var Backbone = window.Backbone;
      var Test = Backbone.Model.extend({
        urlRoot: '/api/tests',
        model_name: 'Test'
      });
      Test.prototype.sync = BackboneORM.sync(Test);

      var test = new Test({name: 'Bob'});
      test.save(function(err){
        Test.stream()
          .on('data', function(model){ console.log("Model: " + model.get('name')); })
          .on('error', function(err){ console.log("An error is NOT expected: " + err); });
      });
    });
  </script>

  </script>
</head>
